"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[237],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return m}});var a=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=a.createContext({}),l=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(r),m=o,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||n;return r?a.createElement(f,i(i({ref:t},p),{},{components:r})):a.createElement(f,i({ref:t},p))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<n;l++)i[l]=r[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3224:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var a=r(3117),o=r(102),n=(r(7294),r(3905)),i=["components"],s={id:"tasks_intro",title:"Deployment Tasks"},c=void 0,l={unversionedId:"deployment/tasks_intro",id:"deployment/tasks_intro",title:"Deployment Tasks",description:"Deployment Tasks are a powerful new feature introduced in Certify The Web v5.x and above.",source:"@site/docs/deployment/tasks_intro.md",sourceDirName:"deployment",slug:"/deployment/tasks_intro",permalink:"/docs/deployment/tasks_intro",draft:!1,editUrl:"https://github.com/webprofusion/certify-docs/edit/master/docs/deployment/tasks_intro.md",tags:[],version:"current",frontMatter:{id:"tasks_intro",title:"Deployment Tasks"},sidebar:"docSiderbar",previous:{title:"DNS Validation (dns-01)",permalink:"/docs/dns/validation"},next:{title:"Scripting",permalink:"/docs/script-hooks"}},p={},u=[{value:"Pre-Request Tasks",id:"pre-request-tasks",level:2},{value:"Post-Request (Deployment) Tasks",id:"post-request-deployment-tasks",level:2},{value:"Task Triggers",id:"task-triggers",level:3},{value:"Task Types",id:"task-types",level:2},{value:"Deploy to Microsoft Exchange",id:"deploy-to-microsoft-exchange",level:3},{value:"Deploy to ADFS, Remote Desktop (RDP) Gateway, RDP Listener service, Remote Access (RAS, SSTP VPN etc)",id:"deploy-to-adfs-remote-desktop-rdp-gateway-rdp-listener-service-remote-access-ras-sstp-vpn-etc",level:3},{value:"Deploy to Certificate Store (Local)",id:"deploy-to-certificate-store-local",level:3},{value:"Deploy to Microsoft Azure Key Vault",id:"deploy-to-microsoft-azure-key-vault",level:3},{value:"Deploy to Apache, nginx, Generic Server, Certificate Export",id:"deploy-to-apache-nginx-generic-server-certificate-export",level:3},{value:"Deploy to Tomcat",id:"deploy-to-tomcat",level:3},{value:"Run a Powershell script",id:"run-a-powershell-script",level:3},{value:"Passing custom arguments",id:"passing-custom-arguments",level:4},{value:"Run a Script",id:"run-a-script",level:3},{value:"Call a custom Webhook",id:"call-a-custom-webhook",level:3},{value:"Stop, Start or Restart a Service",id:"stop-start-or-restart-a-service",level:3}],d={toc:u};function m(e){var t=e.components,s=(0,o.Z)(e,i);return(0,n.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Deployment Tasks are a powerful new feature introduced in Certify The Web v5.x and above."),"\nOnce you have a certificate issued by a certificate authority you can go ahead and use that certificate for it's intended purpose. This is generally anything that might require a valid verified domain (such as a webserver, mail server, ftp service, remote access etc)."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Startup UI",src:r(7988).Z,width:"688",height:"445"})),(0,n.kt)("p",null,"By default Certify The Web supports Auto deployment to the local machine certificate store and will auto configure/update https bindings in IIS on the local server."),(0,n.kt)("p",null,"If you need to perform more custom steps using the certificate, or if you just want to perform certain workflows after the certificate has been renewed (such as a restarting a local or remote service), you can use ",(0,n.kt)("em",{parentName:"p"},"Deployment Tasks"),"."),(0,n.kt)("h2",{id:"pre-request-tasks"},"Pre-Request Tasks"),(0,n.kt)("p",null,"You may wish to run a custom task before you renew your certificate. For instance, you may wish to to make automated firewall changes or call a custom Web Hook/API. These are called 'Pre-Request Tasks'."),(0,n.kt)("h2",{id:"post-request-deployment-tasks"},"Post-Request (Deployment) Tasks"),(0,n.kt)("p",null,"You may want to run any number of tasks after you have renewed your certificate or after it has been automatically deployed. For instance, running scripts, exporting for different server types (Apache, nginx), copying to remote servers etc. These are called 'Deployment Tasks'."),(0,n.kt)("h3",{id:"task-triggers"},"Task Triggers"),(0,n.kt)("p",null,"You can configure a task to run either when a certificate request was successful or on error, or you can opt to run the task manually."),(0,n.kt)("p",null,"Manually running a task is useful when you want to avoid restarting a service outside of maintenance hours, or if you wish to run the tasks from the command line, a script or a scheduled task. Example command line arguments are shown in the UI to help with scripting."),(0,n.kt)("h2",{id:"task-types"},"Task Types"),(0,n.kt)("p",null,"Supported task types, each with UI to configure the task parameters etc, include:"),(0,n.kt)("h3",{id:"deploy-to-microsoft-exchange"},"Deploy to Microsoft Exchange"),(0,n.kt)("p",null,"Apply the certificate to a local MS Exchange services and apply it to an optional list of services (IMAP, SMTP, IIS, POP etc)."),(0,n.kt)("h3",{id:"deploy-to-adfs-remote-desktop-rdp-gateway-rdp-listener-service-remote-access-ras-sstp-vpn-etc"},"Deploy to ADFS, Remote Desktop (RDP) Gateway, RDP Listener service, Remote Access (RAS, SSTP VPN etc)"),(0,n.kt)("p",null,"Pre-built PowerShell tasks to apply the latest certificate to common windows services. Includes Active Directory Federation Services (ADFS), Web Deploy/Web Management Service."),(0,n.kt)("h3",{id:"deploy-to-certificate-store-local"},"Deploy to Certificate Store (Local)"),(0,n.kt)("p",null,"Import the certificate into the local certificate store with your choice of store type (Personal, Web Hosting) and choice of Friendly Name. Note that the default auto deployment system in Certify will already store certificates in the My/Personal certificate store."),(0,n.kt)("h3",{id:"deploy-to-microsoft-azure-key-vault"},"Deploy to Microsoft Azure Key Vault"),(0,n.kt)("p",null,"Export the certificate to Azure Key Vault for distribution to other application and services."),(0,n.kt)("h3",{id:"deploy-to-apache-nginx-generic-server-certificate-export"},"Deploy to Apache, nginx, Generic Server, Certificate Export"),(0,n.kt)("p",null,"Export the certificate to local or remote locations (including SSH/SFTP) as PEM format with Key file and optional chain file."),(0,n.kt)("p",null,"For a general introduction to certificates and their file types see ",(0,n.kt)("a",{parentName:"p",href:"/docs/guides/certificates"},"Certificates"),"."),(0,n.kt)("h3",{id:"deploy-to-tomcat"},"Deploy to Tomcat"),(0,n.kt)("p",null,"Export the certificate as a pkcs12 key store for use with Apache Tomcat. See ",(0,n.kt)("a",{parentName:"p",href:"/docs/deployment/tasks/tomcat"},"more details"),"."),(0,n.kt)("h3",{id:"run-a-powershell-script"},"Run a Powershell script"),(0,n.kt)("p",null,"Execute a custom ",(0,n.kt)("a",{parentName:"p",href:"/docs/script-hooks"},"PowerShell script"),"."),(0,n.kt)("h4",{id:"passing-custom-arguments"},"Passing custom arguments"),(0,n.kt)("p",null,"Note if passing additional arguments to your script these should be in the format arg=value;arg2=value and ",(0,n.kt)("inlineCode",{parentName:"p"},";")," characters required as parameter values need to be escaped with ",(0,n.kt)("inlineCode",{parentName:"p"},"\\"),", like ",(0,n.kt)("inlineCode",{parentName:"p"},"key=abc\\;123h;othervalue=test"),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"\\")," character can be escaped as ",(0,n.kt)("inlineCode",{parentName:"p"},"\\\\")," e.g. to pass an couple of arguments and the first is ",(0,n.kt)("inlineCode",{parentName:"p"},"path")," with value ",(0,n.kt)("inlineCode",{parentName:"p"},"c:\\temp\\folder")," you could use ",(0,n.kt)("inlineCode",{parentName:"p"},"path=c:\\temp\\folder\\\\;other=test")),(0,n.kt)("h3",{id:"run-a-script"},"Run a Script"),(0,n.kt)("p",null,"Execute an environment specific script (such as as a windows batch file or a linux bash script)."),(0,n.kt)("h3",{id:"call-a-custom-webhook"},"Call a custom Webhook"),(0,n.kt)("p",null,"Call a webhook with details of the latest certificate request status. Your custom Body template can use variables, e.g.:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'{\n  "Success": "$Success",\n  "PrimaryDomain": "$PrimaryDomain",\n  "SANs": "$SubjectAlternativeNames"\n}\n')),(0,n.kt)("p",null,"For advanced webhook scenarios, a custom script is recommended (see Powershell script above)."),(0,n.kt)("h3",{id:"stop-start-or-restart-a-service"},"Stop, Start or Restart a Service"),(0,n.kt)("p",null,"Select a local service to restart. Usually used in conjunction with another deployment task to cause the new certificate to new applied."))}m.isMDXComponent=!0},7988:function(e,t,r){t.Z=r.p+"assets/images/DeploymentTasks-2593f0b566501d7bd3da996402cc4e79.png"}}]);